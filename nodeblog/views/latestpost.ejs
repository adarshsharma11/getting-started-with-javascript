<% include ./layouts/header.ejs %>

<main>
        
    <section class="publicaciones-blog-home">
      <div class="container">
        <div class="">
          <h2>LATEST  <b>POST</b></h2>
        
          <div class="row-page row">
              <% if(typeof posts[0] !='undefined'){ %>
            <div class="col-page col-sm-8 col-md-6">
              <a href="" class="black fondo-publicacion-home">
                <div class="img-publicacion-principal-home">
                  <img class="" src="images/<%= posts[0].image %>" >
                </div>
                <div class="contenido-publicacion-principal-home">
                  <h3><%= posts[0].title.slice(0, 40) + (posts[0].title.length > 40 ? "..." : ""); %></h3>
                  <p><%- posts[0].data.slice(0, 620) + (posts[0].data.length > 620 ? "..." : ""); %><span>...</span></p>
                </div>
                <div class="mascara-enlace-blog-home data" id="data" data-val='<%= JSON.stringify(posts[0]) %>'>
                  <span>View</span>
                </div>
              </a>
            </div>
              <% } %>
              
              <% for(post=1;post<posts.length;post++){ %>
            <div class="col-page col-sm-4 col-md-3">
              <a href=""  class="fondo-publicacion-home">
                <div class="img-publicacion-home">
                  <img class="img-responsive" src="images/<%= posts[post].image %>">
                </div>
                <div class="contenido-publicacion-home">
                  <h3><%= posts[post].title.slice(0, 30) + (posts[post].title.length > 30 ? "..." : ""); %></h3>
                  <p><%- posts[post].data.slice(0, 150) + (posts[post].data.length > 150 ? "..." : ""); %>.<span>...</span></p>
                </div>
                <div class="mascara-enlace-blog-home data" id="data" data-val='<%= JSON.stringify(posts[post]) %>'>
                  <span>View </span>
                </div>
              </a>
            </div>
            <% } %>
            
            <div class="modal bounce" id="showpost">
              <div class="modal-dialog modal-lg">
                  <div class="modal-content">
                      <div class="modal-header">
                        <h4 class="modal-title">Modal title</h4>
                          
                          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                      </div>
                      <div class="modal-body">
                        <div class="row">
                           
                          <img id="image" src="http://127.0.0.1:3000/images/Snap-Glasses-v2-nobody-wants-796x419.jpg" style="width: 100%;" class="img-responsive">
                         
                           <div  style="word-wrap: break-word;" id="description"></div>
                        </div>
                        </div>
                      
                  </div>
              </div>
          </div>

          <script>
            $(document).ready(function(){
             $(".data").on('click',function(e){
               e.preventDefault();
              var data=JSON.parse($(this).attr("data-val"));
              $(".modal-title").text(data.title.slice(0, 60)+"...");
              $("#image").attr("src","images/"+data.image);
              $("#description").html(data.data);
              $('#showpost').modal('show'); 
             });
            });
             
            </script>
            


</main>

<% include ./layouts/footer.ejs %>
